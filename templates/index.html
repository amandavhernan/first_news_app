<!doctype html>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- datatables css -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.2/css/jquery.dataTables.css">
    <!-- css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
    <!-- leaflet css -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
    crossorigin=""/>
    <!-- leaflet js -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
    crossorigin=""></script>
    <!-- leaflet heatmap js -->
    <script src="{{ url_for('static', filename='leaflet-heat.js') }}"></script>
    <!-- jquery -->
    <script type="text/javascript" src="https://www.unpkg.com/jquery@3.6.3/dist/jquery.min.js"></script>
    <!-- datatables js -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.2/js/jquery.dataTables.js"></script>

    </head>
    <body>
        <nav>
            <a href="https://first-news-app-umd.readthedocs.org/">
                <img src="{{ url_for('static', filename='shell.png') }}">
            </a>
        </nav>
        <header>
            <h1>The Toll of Substance Use Disorder: Tracking Baltimore's 911 Overdose Calls</h1>
                <div class="byline">
                    By <a href="https://first-news-app-umd.readthedocs.org/">The First News App Tutorial</a>
                </div>
            </header>

            <p>The opioid epidemic affects all Marylanders, but this news app aims to highlight the extent of substance use disorder in
                Baltimore. The <a href="https://data.baltimorecity.gov/datasets/911-calls-for-service-2022/explore?filters=eyJkZXNjcmlwdGlvbiI6WyJPVkVSRE9TRSIsIlBPU1MgT1ZFUkRPU0UiXX0%3D">data used to build the heatmap</a> 
                displaying the concentration of 911 overdose-related calls was sourced from the Open Baltimore data portal. Under the heatmap, users
                can continue exploring the data by searching for specific neighborhoods, addresses, and call numbers. Users can also use the table to organize 
                numerical data by ascending or descending order. By clicking on a call number, users will be redirected to a new page containing additional information specific 
                to that incident.
            </p>
            
            <h3>Resources</h3>
            <p>Local programs, treatment centers, and support groups</p>

            <ul>
                <li><a href="https://health.baltimorecity.gov/programs/substance-abuse">Staying Alive Drug Overdose Prevention and Response Program</a></li>
                    <ul>
                        <li>This program distributes naloxone — a medicine used to reverse overdoses — and provides naloxone training and overdose prevention education.</li>
                    </ul>
                <li><a href="https://health.baltimorecity.gov/hiv-std-services/community-risk-reduction">Needle Exchange Program</a></li>
                <ul>
                    <li>This program, which is offered by the Baltimore City Health Department, provides clean syringes and disposal services for used syringes to 
                        individuals who are drug-dependent. The program also provides testing for syphilis and HIV, referrals to treatment centers, and naloxone training.
                    </li>
                </ul>
                <li><a href="https://www.bhsbaltimore.org/">Behavioral Health System Baltimore</a></li>
                <li><a href="https://namibaltimore.org/">National Alliance on Mental Health - Baltimore</a></li>
                <li>Substance Abuse and Mental Health Services Administration (SAMHSA)</li>
                    <ul>
                        <li>National Helpline: 1-800-662-HELP (4357) or 1-800-487-4889 (TDD, for hearing impaired)</li>
                        <li><a href="https://findtreatment.gov/">SAMHSA Treatment Facility Locator</a></li>
                    </ul>
                <li><a href="https://na.org/?ID=aboutus">Narcotics Anonymous</a></li>
                <li><a href="https://facesandvoicesofrecovery.org/">Faces & Voices of Recovery</a> </li>
            </ul>

            <h4>Find free naloxone and fentanyl test strips near you</h4>
            
            <p><a href="https://docs.google.com/document/d/1AL4WsGJNsBElDHCi-fZZFyEPnOxg59_izGuctQw7goQ/edit">Overdose Response Programs (ORPs) in Maryland</a></p>
            <iframe src="https://www.google.com/maps/d/embed?mid=1Oc8m4uYRvpJmIKdtG-73GUFLcTQuPmpa&ehbc=2E312F" width="640" height="480"></iframe>
            <p>Source: <a href="https://health.maryland.gov/pha/NALOXONE/Pages/Approved-Entities.aspx">Maryland Department of Health</a></p>

            <hr>

            <h3>Explore the 911 overdose calls made in 2022</h3>

            <div id="map" style="width:100%; height:400px;"></div>
            <p>Source: <a href="https://data.baltimorecity.gov/datasets/911-calls-for-service-2022/explore?filters=eyJkZXNjcmlwdGlvbiI6WyJPVkVSRE9TRSIsIlBPU1MgT1ZFUkRPU0UiXX0%3D">Open Baltimore</a></p>

            <table border=1 cellpadding=7 id="table_id" class="display">
                <thead>
                <tr>
                    <th>Call Number</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Location</th>
                    <th>Neighborhood</th>
                </tr>
                </thead>
                <tbody>
                {% for obj in object_list %}
                <tr>
                    <td><a href="{{ obj.callNumber }}/">{{ obj.callNumber }}</a></td>
                    <td>{{ obj.date }}</td>
                    <td>{{ obj.time }}</td>
                    <td>{{ obj.location }}</td>
                    <td>{{ obj.Neighborhood }}</td>
                </tr>
                {% endfor %}
            </tbody>
            </table>
        <script>
        var map = L.map('map').setView([39.3, -76.5], 11);
        var osmLayer = new L.TileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Data, imagery and map information provided by <a href="https://www.openstreetmap.org/" target="_blank">OpenStreetMap</a>.'
        });
        map.addLayer(osmLayer);
        var data = [
            {% for obj in object_list %}
                L.latLng({{ obj.lat }}, {{ obj.lng }})
            {% if not loop.last %},{% endif %}
            {% endfor %}
          ];
        var heat = L.heatLayer(data, {radius: 25}).addTo(map);
        </script>
        <script>$(document).ready( function () {
            $('#table_id').DataTable();
        } );</script>
    </body>
</html>